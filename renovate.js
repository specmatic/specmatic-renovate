/** @type {import("renovate/dist/config/types").AllConfig} */
module.exports = {
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: [
    "config:recommended",
    "mergeConfidence:all-badges",
    "group:monorepos",
    "group:recommended",
  ],
  addLabels: ["renovate", "dependency"],
  token: process.env.SPECMATIC_GITHUB_TOKEN,
  platform: "github",
  dependencyDashboard: true,
  osvVulnerabilityAlerts: true,
  dependencyDashboardOSVVulnerabilitySummary: "all",
  requireConfig: "optional",
  onboarding: false,
  cachePrivatePackages: true,
  gitIgnoredAuthors: ["renovate@whitesourcesoftware.com", "no-reply@specmatic.io"],
  gitAuthor: "Specmatic Renovate <github-service-account@specmatic.io>",
  ignorePrAuthor: true,
  autodiscover: true,
  autodiscoverFilter: [
    "znsio/specmatic-arazzo",
    "znsio/specmatic-async",
    "znsio/specmatic-google-pubsub",
    "znsio/specmatic-gradle-plugin",
    "znsio/specmatic-graphql",
    "znsio/specmatic-grpc",
    "znsio/specmatic-jdbc",
    "znsio/specmatic-jms",
    "znsio/specmatic-kafka",
    "znsio/specmatic-license",
    "znsio/specmatic-node",
    "znsio/specmatic-openapi",
    "znsio/specmatic-redis",
    "znsio/specmatic-renovate",
    "znsio/specmatic",
  ],
  repositoryCache: "enabled",
  prFooter:
    "This PR has been generated by [Renovate Bot](https://github.com/renovatebot/renovate). Specmatic specific configuration is [managed here](https://github.com/znsio/specmatic-renovate).",
  prHourlyLimit: 0,
  prConcurrentLimit: 0,
  packageRules: [
    {
      matchPackageNames: [
        "gradle",
        "org.assertj:*",
        "org.junit.jupiter:*",
        "org.junit.platform:*",
        "io.mockk:*",
        "io.specmatic.gradle:*",
        "io.specmatic.license:*",
        "org.jetbrains.kotlin:{/,}**",
        "org.jetbrains.kotlin.{/,}**",
        "renovate"
      ],
      matchUpdateTypes: [
        "minor",
        "patch"
      ],
      automerge: true,
    },
  ],
  vulnerabilityAlerts: {
    commitMessagePrefix: "[SECURITY] ",
    commitMessageSuffix: "",
    vulnerabilityFixStrategy: "lowest",
  },
  hostRules: [
    {
      hostType: "maven",
      matchHost: "maven.pkg.github.com",
      username: "specmatic-builder",
      password: process.env.SPECMATIC_GITHUB_TOKEN,
    },
  ]
};
